<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OTP Verification</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <style>
        /* Center the timer text and resend message */
#timer {
    font-size: 1rem;
    text-align: center;
    margin-top: 10px;
}

#resendText {
    font-size: 1rem;
    text-align: center;
    margin-top: 10px;
    color: red;
}

/* Style the modal for better appearance */
.modal-content {
    border-radius: 10px;
    padding: 15px;
}

/* Input field styling */
#otpInput {
    text-align: center;
    font-size: 1.2rem;
    letter-spacing: 2px;
}

    </style>
</head>
<body>
    <!-- Button to Open the OTP Modal -->
    <div class="d-flex justify-content-center mt-5">
        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#otpModal">Verify OTP</button>
    </div>

    <!-- OTP Modal -->
    <div class="modal fade" id="otpModal" tabindex="-1" aria-labelledby="otpModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="otpModalLabel">OTP Verification</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <p>Please enter the OTP sent to your registered mobile number.</p>
                    <form id="otpForm">
                        <div class="mb-3">
                            <label for="otpInput" class="form-label">Enter OTP</label>
                            <input type="text" id="otpInput" class="form-control" maxlength="6" placeholder="6-digit OTP" required>
                        </div>
                        <p id="timer" class="text-muted">Time remaining: <span id="countdown">60</span> seconds</p>
                        <div id="resendText" class="d-none text-danger">Time expired. Please resend OTP.</div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary" form="otpForm">Submit</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Timer logic for OTP
        let timer;
        let countdownElement = document.getElementById("countdown");
        let resendTextElement = document.getElementById("resendText");

        $('#otpModal').on('shown.bs.modal', function () {
            startTimer(60); // Start a 60-second timer
        });

        $('#otpModal').on('hidden.bs.modal', function () {
            clearInterval(timer); // Clear the timer when modal is closed
            countdownElement.textContent = '60'; // Reset the timer
            resendTextElement.classList.add('d-none'); // Hide resend text
        });

        function startTimer(duration) {
            let timeRemaining = duration;
            timer = setInterval(function () {
                timeRemaining--;
                countdownElement.textContent = timeRemaining;

                if (timeRemaining <= 0) {
                    clearInterval(timer);
                    resendTextElement.classList.remove('d-none'); // Show resend text
                    countdownElement.parentElement.classList.add('d-none'); // Hide timer text
                }
            }, 1000);
        }
    </script>

</body>
</html>
